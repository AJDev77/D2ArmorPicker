<div id="container"
     fxLayout="row wrap"
     fxLayoutAlign="center"
     fxLayoutGap="5px"
>

  <mat-card>
    <mat-card-header>
      <mat-card-title>Configuration</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <!--
      <p>Use armor:</p>
      <mat-button-toggle-group [(ngModel)]="options.armorType">
        <mat-button-toggle value="1">Own Armor</mat-button-toggle>
        <mat-button-toggle value="2">Generated Armor</mat-button-toggle>
        <mat-button-toggle value="3">Both</mat-button-toggle>
      </mat-button-toggle-group>
      -->

      <h2>Stats</h2>
      <table class="example-full-width" cellspacing="0">
        <tr>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Mobility</mat-label>
              <input matInput type="number" min="-20" max="300" [(ngModel)]="options.stats.desired.mobility">
            </mat-form-field>
          </td>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Resilience</mat-label>
              <input matInput type="number" min="-20" max="300" [(ngModel)]="options.stats.desired.resilience">
            </mat-form-field>
          </td>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Recovery</mat-label>
              <input matInput type="number" min="-20" max="300" [(ngModel)]="options.stats.desired.recovery">
            </mat-form-field>
          </td>
        </tr>
        <tr>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Discipline</mat-label>
              <input matInput type="number" min="-20" max="300" [(ngModel)]="options.stats.desired.discipline">
            </mat-form-field>
          </td>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Intellect</mat-label>
              <input matInput type="number" min="-20" max="300" [(ngModel)]="options.stats.desired.intellect">
            </mat-form-field>
          </td>
          <td>
            <mat-form-field class="example-full-width">
              <mat-label>Strength</mat-label>
              <input matInput type="number" min="-20" max="300" [(ngModel)]="options.stats.desired.strength">
            </mat-form-field>
          </td>
        </tr>
      </table>


      <table id="slider-table">
        <tr>
          <td>Max Waste:</td>
          <td><mat-slider min="0" max="54" step="1" tickInterval="auto" [(ngModel)]="options.stats.maxWaste"></mat-slider></td>
          <td>{{options.stats.maxWaste}} points</td>
        </tr>
        <tr>
          <td>Minimum Tiers:</td>
          <td><mat-slider min="10" max="55" step="1" tickInterval="auto" [(ngModel)]="options.stats.minTiers"></mat-slider></td>
          <td>{{options.stats.minTiers}} tiers</td>
        </tr>
        <tr>
          <td>Max Mods:</td>
          <td><mat-slider min="0" max="5" step="1" tickInterval="auto" [(ngModel)]="options.mods.maxMods"></mat-slider></td>
          <td>{{options.mods.maxMods}} mods</td>
        </tr>
        <tr>
          <td>Max Artifice Mods:</td>
          <td><mat-slider min="0" max="5" step="1" tickInterval="auto" [(ngModel)]="options.mods.maxArtifice"></mat-slider></td>
          <td>{{options.mods.maxArtifice}} mods</td>
        </tr>
      </table>


    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="run()" [disabled]="!glpk || calculating">Calculate</button>
      <mat-progress-bar [value]="time_progress"></mat-progress-bar>
    </mat-card-actions>
  </mat-card>

  <mat-card>
    <mat-card-header>
      <mat-card-title>Solver Configuration</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div>
        Timeout:
        <!-- timeout as a slider from 0.5s to 120s -->
        <mat-slider min="0.5" max="60" step="0.5" [(ngModel)]="options.solver.timeout"></mat-slider>
        <span>{{options.solver.timeout}}s</span>
      </div>

      <mat-slide-toggle [(ngModel)]="options.solver.presolve">
        Execute Presolver
      </mat-slide-toggle>


    </mat-card-content>

  </mat-card>


  <mat-card>
    <mat-card-header>
      <mat-card-title>Results</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p>Status: {{resultValueToText(result?.result?.status!)}}</p>
      <p>Time (s): {{result?.time}}</p>

      <table id="result-table" *ngIf="result_items">
        <tr class="line-bottom">
          <td>Type</td>
          <td>Mobility</td>
          <td>Resilience</td>
          <td>Recovery</td>
          <td>Discipline</td>
          <td>Intellect</td>
          <td>Strength</td>
          <td>Sum</td>
        </tr>
        <tr *ngFor="let item of result_items['items']; let idx = index">
          <td>{{slotNameByIndex(idx)}}</td>
          <td *ngFor="let stat of item">{{stat}}</td>
          <td>{{sum(item)}}</td>
        </tr>
        <!-- Masterwork -->
        <tr class="line-top">
          <td>Masterwork</td>
          <td *ngFor="let stat of result_items['masterwork']">{{stat}}</td>
          <td>{{sum(result_items['masterwork']) }}</td>
        </tr>
        <!-- constantBoost -->
        <tr *ngIf="sum(result_items['constants']) > 0" >
          <td>Constant Boosts</td>
          <td *ngFor="let stat of result_items['constants']">{{stat}}</td>
          <td>{{sum(result_items['constants']) }}</td>
        </tr>
        <!-- Stat Mods -->
        <tr class="line-top">
          <td>Major Mods</td>
          <td *ngFor="let stat of result_items['statMods']['major']">{{10 * stat}}</td>
          <td>{{sum(result_items['statMods']['major']) * 10}}</td>
        </tr>
        <tr>
          <td>Minor Mods</td>
          <td *ngFor="let stat of result_items['statMods']['major']">{{5 * stat}}</td>
          <td>{{sum(result_items['statMods']['major']) * 5}}</td>
        </tr>
        <!-- ARTIFICE -->
        <tr>
          <td>Artifice Mods</td>
          <td *ngFor="let stat of result_items['artificeMods']">{{3 * stat}}</td>
          <td>{{sum(result_items['artificeMods']) * 3}}</td>
        </tr>
        <!-- TOTAL -->
        <tr class="line-top line-bottom">
          <td >Total</td>
          <td *ngFor="let stat of result_items['total']">{{stat}}</td>
          <td>{{sum(result_items['total'])}}</td>
        </tr>
        <!-- WASTE -->
        <tr>
          <td>Waste</td>
          <td *ngFor="let stat of result_items['waste']">{{stat}}</td>
          <td>{{sum(result_items['waste'])}}</td>
        </tr>
        <!-- TIERS -->
        <tr>
          <td>Tiers</td>
          <td *ngFor="let stat of result_items['tiers']">{{stat}}</td>
          <td>{{sum(result_items['tiers'])}}</td>
        </tr>
      </table>

    </mat-card-content>
  </mat-card>
</div>
<div>
      <mat-card>
        <mat-card-header>
          <mat-card-title>Results</mat-card-title>
        </mat-card-header>
        <mat-card-content>
      <p>{{result_items|json}}</p>
      <p>{{result?.result|json}}</p>
    </mat-card-content>
  </mat-card>

</div>
